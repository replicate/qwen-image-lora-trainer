build:
  # Base image with CUDA support
  gpu: true
  cuda: "12.1"
  python_version: "3.11"
  
  # System packages
  system_packages:
    - "libgl1-mesa-glx"
    - "libglib2.0-0"
    - "libsm6"
    - "libxext6"
    - "libxrender-dev"
    - "libgomp1"
    - "git"
    - "git-lfs"
  
  # Python requirements (using requirements.txt for pinned versions)
  python_requirements: requirements.txt
    
  # Build commands to set up the environment
  run:
    # Install additional requirements if needed
    - "pip install oyaml"

# Specify the training and prediction entry points
train: "train.py:train"
predict: "predict.py:Predictor"

# Optional: specify image for faster builds (if you have a pre-built base image)
# image: "your-registry/qwen-image-base:latest"